<!DOCTYPE html>
<html>
<head>
<script src="https://sdk.clarifai.com/js/clarifai-latest.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script> 
    // initialize with your api key. This will also work in your browser via http://browserify.org/

    const app = new Clarifai.App({
     apiKey: 'daa61691c8ce41d8820694e320b50cd2'
    });
    
    function getResponse() {
        $('#my-form').submit(function(e) {
            e.preventDefault();

            var data = new FormData();
            data.append("uploadFiles", $('[name="file"]')[0].files[0]);

            jQuery.ajax({
              url: 'http://uploads.im/api?upload',
              data: data,
              cache: false,
              contentType: false,
              processData: false,
              method: 'POST',
              success: function(data){
                 findHotDog(data);
              }
            });
        });
    }
    
    function findHotDog() {
        //var imgurl = JSON.parse(JSON.stringify(data)).data.img_url;
        
        app.models.predict(Clarifai.GENERAL_MODEL, 'http://sk.uploads.im/aQvHp.jpg').then(
            function(response) {
                var concepts = JSON.parse(JSON.stringify(response)).outputs[0].data.concepts;
                alert(concepts.length);
            },
            function(err) {
                alert(err);
            }
        );
    }
    
</script>
</head>
<body>
    <form id="my-form" action="http://uploads.im/api?upload" method="post" enctype="multipart/form-data">
        <input type="file" name="file" />
        <input type="submit" value="submit!" onclick="findHotDog()"/>
    </form>
</body>
</html>
