<script type="text/javascript" src="https://sdk.clarifai.com/js/clarifai-latest.js"></script>
<script>
  // instantiate a new Clarifai app passing in your API Key
  const app = new Clarifai.App({
  apiKey: 'daa61691c8ce41d8820694e320b50cd2'
  });
  
  var img;
  
 /* window.addEventListener('load', function() {
  document.querySelector('input[type="file"]').addEventListener('change', function() {
      if (this.files && this.files[0]) {
          img = document.querySelector('img');  // $('img')[0]
          img.src = URL.createObjectURL(this.files[0]); // set src to file url
          //img.onload = imageIsLoaded; // optional onload event listener
      }
  });
});*/
  
function imageIsLoaded(e) { alert(e); }
function consult() {
  var imgurl = URL.createObjectURL(img.src);
  app.models.predict(Clarifai.GENERAL_MODEL, imgurl).then(
    function(response) {
      strResponse = JSON.stringify(response);
      jsonParse = JSON.parse(strResponse);
      console.log(jsonParse.outputs[0].data);
    },
    function(err) {
      console.log(err)
    }
  );
}
</script>

<html>
  <head>
    <script src="jquery-3.2.1.min.js">
      $( "#uploadImg" ).submit(function( event ) {

             event.preventDefault(); //to prevent default submission of form

             $.post( "http://uploads.im/api?upload", $( "#uploadImg" ).serialize(),function(data){

                console.log(data); //Response from server
            });


       });
    </script>
  </head>
  <body>
  <form method="POST" id="uploadImg" action="http://uploads.im/api?upload" enctype="multipart/form-data">
  <input type="file" name="file" />
  <input type="submit" value="consult hot dog expert!">
  </form>
  </body>
</html>
